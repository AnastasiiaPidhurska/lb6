Лабораторна робота №6
Тема: Threads – створення, управління, завершення

Мета роботи:
Ознайомитись із засобами створення, управління та завершення потоків у середовищі Linux. Набути практичних навичок використання бібліотеки pthread, обробки функцій у паралельних потоках та їх синхронізації.

Завдання 1 — Обчислення чисел Каталана та простих чисел
Потрібно створити два потоки.
Перший потік обчислює n перших чисел Каталана, другий потік обчислює n перших простих чисел.
Основний потік очікує завершення обох потоків і виводить результати.

У програмі використано структуру для передачі аргументів у потік. Обчислення чисел Каталана виконується за рекурентною формулою
Cₙ = (2(2n − 1)Cₙ₋₁) / (n + 1)
Прості числа обчислюються перевіркою ділення до квадратного кореня.
Обидва потоки створюються за допомогою функції pthread_create() і завершуються через pthread_join().

Приклад запуску:
make
./main 10

Приклад виводу:
Числа Каталана:
1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862

Прості числа:
2, 3, 5, 7, 11, 13, 17, 19, 23, 29

Завдання 2 — Обчислення π з можливістю скасування потоку
Потік обчислює число π за формулою Лейбніца:
π = 4 * Σ((-1)ⁱ / (2i + 1)), де i = 0…N
Основний потік очікує вказану кількість секунд, а потім скасовує потік.

У програмі використано функції:
pthread_cancel() — для скасування потоку;
pthread_cleanup_push() — для виконання очищення перед завершенням;
pthread_testcancel() — для перевірки точки скасування.

Потік має структуру з кількістю ітерацій, виконує перевірку можливості скасування (PTHREAD_CANCEL_ENABLE) і періодично виводить проміжне значення π.

Приклад запуску:
make
./main 3 100000000

Приклад виводу:
Головний потік очікує 3 секунд...
Потік: ітерація 0, π ≈ 4.0000000000
Потік: ітерація 1000000, π ≈ 3.1415916536
Надсилається запит на скасування потоку...
Потік завершується. Поточне значення π ≈ 3.1415916536
Потік був успішно скасований.

Використані бібліотеки:
pthread.h — робота з потоками
math.h — математичні функції (sqrt)
unistd.h — функції затримки (sleep)
stdlib.h, stdio.h — стандартне введення та виведення

Висновки:
У ході виконання лабораторної роботи я ознайомився з основами роботи потоків у Linux, навчився створювати, запускати, очікувати та скасовувати потоки, використовуючи бібліотеку pthread.
Реалізував практичні приклади паралельних обчислень: генерацію чисел Каталана, пошук простих чисел та обчислення числа π з можливістю зупинки потоку.

Автор: Анастасія Підгурська, група КБ31
